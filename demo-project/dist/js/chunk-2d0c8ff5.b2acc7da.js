(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c8ff5"],{"56ec":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"container"},[a("div",{staticClass:"text-right mt-4",attrs:{width:"200px"}},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openmodal("new")}}},[t._v("新增房間")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-dark"},[t._m(0),a("tbody",t._l(t.products,(function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.category))]),a("td",{attrs:{width:"300"}},[t._v(t._s(e.title))]),a("td"),a("td",[t._v(t._s(e.origin_price))]),a("td",[t._v(t._s(e.price))]),a("td",[a("label",{staticClass:"switch"},[a("input",{attrs:{type:"checkbox",disabled:""},domProps:{checked:e.enabled}}),a("span",{staticClass:"slider round"})])]),a("td",{attrs:{width:"180"}},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.openmodal("edit",e)}}},[t._v("加入 ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.openmodal("del",e)}}},[t._v("取消")])])])])})),0)])])]),a("pagination",{staticClass:"justify-content-center",attrs:{pages:t.pagination},on:{update:t.getProducts}}),a("Productmodal",{ref:"productModal",attrs:{isNew:t.isNew},on:{update:t.getProducts}}),a("DelProducts",{ref:"delProductModal",attrs:{"temp-product":t.tempProduct},on:{update:t.getProducts}})],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"140"}},[t._v("分類")]),a("th",{attrs:{width:"250"}},[t._v("產品名稱")]),a("th",{attrs:{width:"250"}},[t._v("額外服務")]),a("th",{attrs:{width:"140"}},[t._v("原價")]),a("th",{attrs:{width:"140"}},[t._v("售價")]),a("th",{attrs:{width:"250"}},[t._v("設施服務")]),a("th",{attrs:{width:"140"}},[t._v("編輯")])])])}],r=(a("99af"),a("5530")),i=a("1157"),c=a.n(i),d=a("1799"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel "}},[a("span",[t._v(t._s(t.isNew?"新增房間":"重訂房間"))])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"imageUrl"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl[0],expression:"tempProduct.imageUrl[0]"}],staticClass:"form-control",attrs:{id:"imageUrl",type:"text",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl[0]},on:{input:function(e){e.target.composing||t.$set(t.tempProduct.imageUrl,0,e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cust"}},[t._v("上傳圖片網址")]),a("input",{staticClass:"form-control",attrs:{type:"file",id:"cust"},on:{change:function(e){return t.upload()}}})]),a("img",{staticClass:"img-fluid",attrs:{src:t.tempProduct.imageUrl[0],alt:""}})]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{id:"tempProduct.title",type:"text",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{id:"tempProduct.category",type:"text",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"unit"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{id:"tempProduct.unit",type:"text",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{id:"tempProduct.origin_price",type:"text",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{id:"tempProduct.price",type:"text",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{name:"description",id:"tempProduct.description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{name:"content",id:"tempProduct.content",placeholder:"請輸入說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label",attrs:{for:"enabled"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.enabled,expression:"tempProduct.enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"enabled",id:"tempProduct.enabled"},domProps:{checked:Array.isArray(t.tempProduct.enabled)?t._i(t.tempProduct.enabled,null)>-1:t.tempProduct.enabled},on:{change:function(e){var a=t.tempProduct.enabled,o=e.target,s=!!o.checked;if(Array.isArray(a)){var r=null,i=t._i(a,r);o.checked?i<0&&t.$set(t.tempProduct,"enabled",a.concat([r])):i>-1&&t.$set(t.tempProduct,"enabled",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.tempProduct,"enabled",s)}}}),t._v("額外服務 ")])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.updateProduct()}}},[t._v("確認")])])])])])])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],u={data:function(){return{tempProduct:{imageUrl:[]}}},props:["isNew"],methods:{getProduct:function(t){var e=this,a="".concat("https://course-ec-api.hexschool.io/api/").concat("805a8755-d565-473e-90ee-9d24771ddf47","/admin/ec/product/").concat(t);this.$http.get(a).then((function(t){c()("#productModal").modal("show"),e.tempProduct=t.data.data})).catch((function(t){console.log(t)}))},updateProduct:function(){var t=this,e="post",a="".concat("https://course-ec-api.hexschool.io/api/").concat("805a8755-d565-473e-90ee-9d24771ddf47","/admin/ec/product");this.isNew||(e="patch",a="".concat("https://course-ec-api.hexschool.io/api/").concat("805a8755-d565-473e-90ee-9d24771ddf47","/admin/ec/product/").concat(this.tempProduct.id)),this.$http[e](a,this.tempProduct).then((function(e){t.$emit("update")})).catch((function(t){console.log(t)})),c()("#productModal").modal("hide")},upload:function(){var t=this,e=document.querySelector("#cust").files[0],a=new FormData;a.append("file",e);var o="".concat("https://course-ec-api.hexschool.io/api/").concat("805a8755-d565-473e-90ee-9d24771ddf47","/admin/storage");this.$http.post(o,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.tempProduct.imageUrl.push(e.data.data.path),document.querySelector("#cust").value=""}))}}},p=u,m=a("2877"),v=Object(m["a"])(p,n,l,!1,null,null,null),h=v.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(0),a("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),t._v(" 房間(刪除後將無法恢復)。 ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.delProduct}},[t._v("確認刪除")])])])])])])},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("取消房間")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],b={props:["tempProduct"],methods:{delProduct:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io/api/").concat("805a8755-d565-473e-90ee-9d24771ddf47","/admin/ec/product/").concat(this.tempProduct.id);this.$http.delete(e,this.tempProduct).then((function(e){console.log(e),t.$emit("delete"),c()("#delProductModal").modal("hide")})).catch((function(t){console.log(t)}))}}},P=b,_=Object(m["a"])(P,g,f,!1,null,null,null),C=_.exports,w={data:function(){return{isLoading:!0,products:[],tempProduct:{imageUrl:[]},pagination:[],loadingbtn:"",isNew:!1,enabled:!0}},components:{Pagination:d["a"],Productmodal:h,DelProducts:C},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://course-ec-api.hexschool.io/api/").concat("805a8755-d565-473e-90ee-9d24771ddf47","/admin/ec/products?page=").concat(e);this.isLoading=!0,this.$http.get(a).then((function(e){console.log(e),t.isLoading=!1,t.products=e.data.data,t.pagination=e.data.meta.pagination})).catch((function(t){console.log(t)}))},openmodal:function(t,e){"new"===t?(this.$refs.productModal.tempProduct={imgUrl:[]},c()("#productModal").modal("show"),this.isNew=!0):"edit"===t?(this.$refs.productModal.getProduct(e.id),this.isNew=!1):"del"===t&&(this.tempProduct=Object(r["a"])({},e),c()("#delProductModal").modal("show"))}},created:function(){this.getProducts()}},y=w,x=Object(m["a"])(y,o,s,!1,null,null,null);e["default"]=x.exports}}]);
//# sourceMappingURL=chunk-2d0c8ff5.b2acc7da.js.map